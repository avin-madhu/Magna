<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Magna</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">
</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top">
    <div class="container d-flex align-items-center justify-content-between">
      <h1 class="logo"> <i onclick="goBackToProductPage()" style="margin-right: 30px; position: absolute; left: 40px; font-size: 35px; cursor: pointer;" class="bi bi-arrow-left-short"></i><a href="index.html">magna</a></h1>
      <!-- Uncomment below if you prefer to use an image logo -->
      <!-- <a href="index.html" class="logo"><img src="assets/img/logo.png" alt="" class="img-fluid"></a>-->

      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link scrollto active" href="#hero"></a></li>
          <li><a class="nav-link scrollto" href="#about">About</a></li>
          <!-- <li><a class="nav-link scrollto" href="#services">Services</a></li> -->
          <li class="logged-in" style="display: none;"><a class="nav-link scrollto " href="inner-page.html">Products</a></li>
          <!-- <li><a class="nav-link scrollto" href="#team">Team</a></li> -->
          <!-- <li class="dropdown"><a href="#"><span>Settings</span></a></li> -->
          <li><a class="nav-link scrollto" href="#contact">Contact</a></li>
          <li data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight"><a href="cart.html"><i style="font-size: 20px;margin-left: 25px;color: #5f687b;" class="bx bx-cart"></i></a></li>
          <li id="logged-in" id="cartButton" style="display: none;" ><a id="logout" class="nav-link scrollto" href="#">LogOut</a></li>
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->
    
    </div>
  </header><!-- End Header -->

  <main id="main">


  <section id="product-page-real">
    <section id="portfolio" class="portfolio">
      <div class="container">

        <div class="section-title">
          <span>Product Page</span>
          <h2>Products</h2>
          <p class="font-size-element">Experience shopping made simple with our uniquely user-friendly platform</p>
        </div>

        <div class="row">
          <div class="col-lg-12 d-flex justify-content-center">
            <ul id="portfolio-flters">
              <li class="font-size-element" data-filter="*" class="filter-active">All</li>
              <li class="font-size-element" data-filter=".filter-elec">Electronics</li>
              <li class="font-size-element" data-filter=".filter-cloth">Clothes</li>
              <li class="font-size-element" data-filter=".filter-sport">Sports</li>
            </ul>
          </div>
        </div>

        <style>
          .product-card{
            background-color: rgb(13, 13, 13);
            color: aliceblue;
            border-radius: 15px;
            padding: 5px 15px;
          }
          .product-actions{
            display: flex;
            justify-content: space-around;
            right: 0%;
            font-size: 30px;
            background-color: #33030d;
            border-radius: 20px;
            margin-bottom:15px;
          }
          .product-item img{
            margin-top: 12px; 
            margin-bottom:12px; 
            border-radius:10px;
          }

          .product-card p{
            font-size: 30px;
          }
        </style>

        <div class="row portfolio-container">

          <div class="product-item col-lg-4 col-md-6 portfolio-item filter-cloth">
            <div class="product-card">
                <img src="assets/img/portfolio/portfolio1.jpg" class="img-fluid" alt="Product Image">
                <div class="product-info">
                    <h4 style="color: aliceblue;">Graphic Black T-Shirt</h4>
                    <p  style="color: aliceblue;font-size: 30px;"class="price">$49.99</p>
                    <!-- Additional information like product description, ratings, etc. can be added here -->
                    <div style="align-content: center;" class="product-actions">
                        <a onclick="gotoCartPage(),addCurrentCartId(1)" style="cursor: pointer; color: rgb(77, 238, 99);"  title="add to cart"><i class="bx bx-cart-add"></i></a>
                        <a onclick="changepage(1)" class="details-link"><button class="btn btn-success" >Buy Now</button></a>
                    </div>
                </div>
            </div>
        </div>

          <div class="product-item col-lg-4 col-md-6 portfolio-item filter-sport">
            <div class="product-card">
              <img src="assets/img/portfolio/portfolio2.jpg" class="img-fluid" alt="">
              <div class="product-info">
                <h4 style="color: aliceblue;">Leather Football</h4>
                <p style="font-size: 30px;"class="price">$30.00</p>
                <div class="product-actions">
                  <a onclick="gotoCartPage(),addCurrentCartId(2)" style="cursor: pointer; color: rgb(77, 238, 99);"  title="add to cart"><i class="bx bx-cart-add"></i></a>
                  <a onclick="changepage(2)" class="details-link"><button class="btn btn-success" >Buy Now</button></a>
                </div>
              </div>
            </div>
          </div>

          <div class="product-item col-lg-4 col-md-6 portfolio-item filter-sport">
            <div class="product-card">
              <img src="assets/img/portfolio/portfolio3.jpg" class="img-fluid" alt="">
              <div class="product-info">
                <h4 style="color: aliceblue;">Cricket Bat</h4>
                <p style="font-size: 30px;"class="price">$19.89</p>
                <div class="product-actions">
                  <a onclick="gotoCartPage(),addCurrentCartId(3)" style="cursor: pointer; color: rgb(77, 238, 99);"  title="add to cart"><i class="bx bx-cart-add"></i></a>
                        <a onclick="changepage(3)" class="details-link"><button class="btn btn-success" >Buy Now</button></a>
                  </div>
              </div>
            </div>
          </div>

          <div  class="product-item col-lg-4 col-md-6 portfolio-item filter-cloth">
            <div class="product-card">
              <img src="assets/img/portfolio/portfolio-4.jpg" class="img-fluid" alt="">
              <div class="product-info">
                <h4 style="color: aliceblue;">Black Sunglasses</h4>
                <p style="font-size: 30px;"class="price">$14.49</p>
                <div class="product-actions">
                  <a onclick="gotoCartPage(),addCurrentCartId(4)" style="cursor: pointer; color: rgb(77, 238, 99);"  title="add to cart"><i class="bx bx-cart-add"></i></a>
                  <a onclick="changepage(4)" class="details-link"><button class="btn btn-success" >Buy Now</button></a>
                </div>
              </div>
            </div>
          </div>

          <div class="product-item col-lg-4 col-md-6 portfolio-item filter-elec">
            <div class="product-card">
              <img src="assets/img/portfolio/portfolio-5.jpg" class="img-fluid" alt="">
              <div class="product-info">
                <h4 style="color: aliceblue;">Swing Arm Desk Lamp</h4>
                <p style="font-size: 30px;"class="price">$65.00</p>
                <div class="product-actions">
                  <a onclick="gotoCartPage(),addCurrentCartId(5)" style="cursor: pointer; color: rgb(77, 238, 99);"  title="add to cart"><i class="bx bx-cart-add"></i></a>
                  <a onclick="changepage(5)" class="details-link"><button class="btn btn-success" >Buy Now</button></a>
                </div>
              </div>
            </div>
          </div>

          <div class="product-item col-lg-4 col-md-6 portfolio-item filter-elec">
            <div class="product-card">
              <img src="assets/img/portfolio/portfolio6.jpg" class="img-fluid" alt="">
              <div class="product-info">
                <h4 style="color: aliceblue;">Wireless Headphones (Black)</h4>
                <p style="font-size: 30px;"class="price">$89.99</p>
                <div class="product-actions">
                  <a onclick="gotoCartPage(),addCurrentCartId(6)" style="cursor: pointer; color: rgb(77, 238, 99);"  title="add to cart"><i class="bx bx-cart-add"></i></a>
                  <a onclick="changepage(6)" class="details-link"><button class="btn btn-success" >Buy Now</button></a>
                </div>
              </div>
            </div>
          </div>

          <div class="product-item col-lg-4 col-md-6 portfolio-item filter-elec">
            <div class="product-card">
              <img src="assets/img/portfolio/portfolio-7.jpg" class="img-fluid" alt="">
              <div class="product-info">
                <h4 style="color: aliceblue;">EX Macro Lens</h4>
                <p style="font-size: 30px;"class="price">$249.99</p>
                <div class="product-actions">
                  <a onclick="gotoCartPage(),addCurrentCartId(8)" style="cursor: pointer; color: rgb(77, 238, 99);"  title="add to cart"><i class="bx bx-cart-add"></i></a>
                        <a onclick="changepage(8)" class="details-link"><button class="btn btn-success" >Buy Now</button></a>
                </div>
              </div>
            </div>
          </div>

          <div class="product-item col-lg-4 col-md-6 portfolio-item filter-sport">
            <div class="product-card">
              <img src="assets/img/portfolio/portfolio8.jpg" class="img-fluid" alt="">
              <div id="7" class="product-info">
                <h4 style="color: aliceblue;">Cricket Helmet</h4>
                <p style="font-size: 30px;"class="price">$149.99</p>
                <div class="product-actions">
                  <a onclick="gotoCartPage(),addCurrentCartId(7)" style="cursor: pointer; color: rgb(77, 238, 99);"  title="add to cart"><i class="bx bx-cart-add"></i></a>
                        <a onclick="changepage(7)" class="details-link"><button class="btn btn-success" >Buy Now</button></a>
                </div>
              </div>
            </div>
          </div>

          <div class="product-item col-lg-4 col-md-6 portfolio-item filter-cloth">
            <div class="product-card">
              <img src="assets/img/portfolio/portfolio9.jpg" class="img-fluid" alt="">
              <div id="9" class="product-info">
                <h4 style="color: aliceblue;">Puffer Jacket (Yellow)</h4>
                <p style="font-size: 30px;"class="price">$35.00</p>
                <div class="product-actions">
                  <a onclick="gotoCartPage(),addCurrentCartId(9)" style="cursor: pointer; color: rgb(77, 238, 99);"  title="add to cart"><i class="bx bx-cart-add"></i></a>
                  <a onclick="changepage(9)" class="details-link"><button class="btn btn-success" >Buy Now</button></a>
                </div>
              </div>
            </div>
          </div>

        </div>

      </div>

    </section><!-- End Portfolio Section -->

    <!-- ======= Testimonials Section ======= -->
    <section id="testimonials" class="testimonials section-bg">
      <div class="container">

        <div class="section-title">
          <span>You may also like</span>
          <h2>You may also like</h2>
          
        </div>

        <div class="testimonials-slider swiper" data-aos="fade-up" data-aos-delay="100">
          <div class="swiper-wrapper">

            <div class="swiper-slide">
              <div id="9" style="width: 300px"class="product-item col-lg-4 col-md-6 portfolio-item filter-cloth">
                <div class="product-card">
                  <img src="assets/img/portfolio/watch.jpg" class="img-fluid" alt="">
                  <div class="product-info">
                    <h4>Mens Watch </h4>
                    <p>$240.00</p>
                    <div class="product-actions">
                      <a onclick="gotoCartPage(),addCurrentCartId(11)" style="cursor: pointer; color: rgb(77, 238, 99);"  title="add to cart"><i class="bx bx-cart-add"></i></a>
                        <a onclick="changepage(11)" class="details-link"><button class="btn btn-success" >Buy Now</button></a>
                    </div>
                  </div>
                </div>
              </div>
              
            </div><!-- End testimonial item -->

            <div class="swiper-slide">
              <div id="9" style="width: 300px"class="product-item col-lg-4 col-md-6 portfolio-item filter-cloth">
                <div class="product-card">
                  <img src="assets/img/portfolio/blazer.jpg" class="img-fluid" alt="">
                  <div class="product-info">
                    <h4>Blazer (Women)</h4>
                    <p>$50.00</p>
                    <div class="product-actions">
                      <a onclick="gotoCartPage(),addCurrentCartId(13)" style="cursor: pointer; color: rgb(77, 238, 99);"  title="add to cart"><i class="bx bx-cart-add"></i></a>
                        <a onclick="changepage(13)" class="details-link"><button class="btn btn-success" >Buy Now</button></a>
                    </div>
                  </div>
                </div>
              </div>
              
            </div><!-- End testimonial item -->

          
            <div class="swiper-slide">
              <div id="9" style="width: 300px"class="product-item col-lg-4 col-md-6 portfolio-item filter-cloth">
                <div class="product-card">
                  <img src="assets/img/portfolio/night light.jpg" class="img-fluid" alt="">
                  <div class="product-info">
                    <h4>Night Light</h4>
                    <p>$150.00</p>
                    <div class="product-actions">
                      <a onclick="gotoCartPage(),addCurrentCartId(12)" style="cursor: pointer; color: rgb(77, 238, 99);"  title="add to cart"><i class="bx bx-cart-add"></i></a>
                        <a onclick="changepage(12)" class="details-link"><button class="btn btn-success" >Buy Now</button></a>
                    </div>
                  </div>
                </div>
              </div>
          
            </div><!-- End testimonial item -->

            
            </div><!-- End testimonial item -->

          </div>
          <div class="swiper-pagination"></div>
        </div>

      </div>
    </section><!-- End Testimonials Section -->

    
  </main><!-- End #main -->


</section>


  <!-- =========================================================================================================== -->
                                       <!-- PRODUCT DESCRIPTION PAGE -->
  <!-- =========================================================================================================== -->

  <section id="productDescripton-section" style="display: none;">
    <main id="main">

      <!-- ======= Breadcrumbs ======= -->
      <section id="breadcrumbs" class="breadcrumbs">
        <div class="container">
  
          <div class="d-flex justify-content-between align-items-center">
            <h2>Product Details</h2>
            <ol>
              <li><a href="index.html">Home</a></li>
              <li class="font-size-element">Product Details</li>
            </ol>
          </div>
  
        </div>
      </section><!-- End Breadcrumbs -->
  
      <!-- ======= Products Details Section ======= -->
      <section id="portfolio-details" class="portfolio-details">
        <div class="container">
  
          <div class="row gy-4">
  
            <div class="col-lg-8">
              <div class="portfolio-details-slider swiper">
                <div class="swiper-wrapper align-items-center">
  
                  <div class="swiper-slide">
                    <img id="productImage1" src="assets/img/portfolio/portfolio-1.jpg" alt="">
                  </div>
  
                  <div class="swiper-slide">
                    <img src="assets/img/portfolio/portfolio-2.jpg" alt="">
                  </div>
  
                  <div class="swiper-slide">
                    <img src="assets/img/portfolio/portfolio-3.jpg" alt="">
                  </div>
  
                </div>
                <div class="swiper-pagination"></div>
              </div>
            </div>
  
            <div class="col-lg-4">
              <div class="portfolio-info">
                <h2 id="productName"></h2>
                <ul>
                  <!-- <li><strong>Category</strong>: design</li> -->
                  <li class="font-size-element"><strong>Client</strong>: Navigo Company</li>
                  <li class="font-size-element"><strong>Product date</strong>: 24 March, 2024</li>
                  <li class="font-size-element"><strong>Status</strong>: Available</li>
                </ul>
              </div>
              <form method="post"> <!-- Change the form action to your purchase processing page -->
                <label for="quantity">Quantity</label>
                <input onchange="updatePrice()" name="quantity" placeholder="Quantity" type="number" id="quantity" value="1" min="1">
                <h2 id="productPrice" style="font-weight: 500;font-size:50px;"></h3>
                  <a class="btn btn-primary btn-lg" style="cursor: pointer; margin-top: 20px;" href="" onclick="alert('Purchased yey!!'); return false;">Buy Now</a>
              </form>
              <div class="portfolio-description">

                <h2>Product Details</h2>
                <p class="font-size-element" id="productDescriptionMore">
                  Autem ipsum nam porro corporis rerum. Quis eos dolorem eos itaque inventore commodi labore quia quia. Exercitationem repudiandae officiis neque suscipit non officia eaque itaque enim. Voluptatem officia accusantium nesciunt est omnis tempora consectetur dignissimos. Sequi nulla at esse enim cum deserunt eius.
                </p>
              </div>
            </div>
  
            <style>
              /* Style for custom input */
  #quantity {
    padding: 10px;
    border-radius: 5px;
    border: 1px solid #ced4da;
    font-size: 1em;
    width: 100%;
    margin-bottom: 15px;
    box-sizing: border-box;
  }
  
  #quantity:focus {
    border-color: #007bff;
    outline: none;
  }
  
            </style>
            
  
          </div>
  
        </div>
      </section><!-- End Portfolio Details Section -->
  
    </main><!-- End #main -->
  </section>


  <!-- ================================================================================================================================= -->
                                    <!-- cart section -->
  <!-- ================================================================================================================================= -->

  <section id="cart-section" style="display: none">

    <section id="cart-section">
      <div style=" position: absolute;width: 100%;margin-left: 5%; top:5%;bottom: 100px;" class="container mt-5">
          <!-- Cart Summary (fixed top) -->
          <div style="width: 50%; position:absolute;top: 100px;">
              <div class="card">
                  <div class="card-body">
                      <h5 style="font-size: 40px" class="card-title mb-4">Cart Summary</h5>
                      <hr>
                      <p style="font-size: 25px;" class="mb-1">Total Items: <span id="totalItems" class="fw-bold">0</span></p>
                      <p style="font-size: 25px;"  class="mb-4">Total Price: <span id="totalPrice" class="fw-bold">$0.00</span></p>
                      <button class="btn btn-primary btn-block" onclick="checkout()">Checkout</button>
                  </div>
              </div>
          </div>
          <!-- Product Cards -->
          <div  style="align-items:center;position:absolute;top: 350px;bottom:20px;margin-bottom: 30px;" id="product-cards" class="mt-5">
              <!-- Product cards will be dynamically added here -->
          </div>
         
      </div>
      <br><br><br>
  </section>
  


    <style>

.cart-summary {
    width: 300px; /* Adjust width as needed */
    top: 90px;
    right: 10px;
    z-index: 1000; /* Ensure it appears above other elements */
}

.card-container {
    margin-top: 120px; /* Adjust margin to leave space for cart summary */
}

    </style>

    <script>
        window.currentlyAddedProduct = 1

        function addCurrentCartId(btnid)
        {
          window.currentlyAddedProduct = btnid
          console.log(window.currentlyAddedProduct) // correct data id 

          window.addToCartIfNeeded(window.currentlyAddedProduct)
        }
    </script>
    
  
  </section>

  <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
      import { getFirestore, collection, addDoc, setDoc,getDocs ,query, where} from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
      import {getAuth} from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js"

      // Firebase configuration
      const firebaseConfig = {
          apiKey: "AIzaSyAbzDGgeZCaiq-dmWQNqnpq_yi6KLyn_Q0",
          authDomain: "miniproject-740e2.firebaseapp.com",
          projectId: "miniproject-740e2",
          storageBucket: "miniproject-740e2.appspot.com",
          messagingSenderId: "493659960891",
          appId: "1:493659960891:web:d8908059f91a37a6bc8e1e",
          measurementId: "G-49BHFJDWQD",
          databaseURL: "https://miniproject-740e2-default-rtdb.asia-southeast1.firebasedatabase.app/"
        };

 
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        initializeApp(firebaseConfig);
        const auth = getAuth(app);

    // product description read out
              function speakText(text) {
              const selectedVoicePromise = getSpecificVoice();
              selectedVoicePromise.then(selectedVoice => {
                  if (selectedVoice) {
                      const utterance = new SpeechSynthesisUtterance(text);
                      utterance.voice = selectedVoice;
                      speechSynthesis.cancel(); // Stop any ongoing speech
                      speechSynthesis.speak(utterance);

                      utterance.onend = function () {
                          // Speech has ended
                          console.log('Speech ended');
                      };
                  } else {
                      console.error('No valid voice selected');
                  }
              }).catch(error => {
                  console.error('Error getting specific voice:', error);
              });
            }


              function getSpecificVoice() {
              const voiceName = 'Google UK English Female';
              
              return new Promise((resolve, reject) => {
                  const waitForVoices = setInterval(() => {
                      const voices = speechSynthesis.getVoices();
                      if (voices.length) {
                          clearInterval(waitForVoices);
                          const selectedVoice = voices.find(voice => voice.name === voiceName);
                          resolve(selectedVoice);
                      }
                  }, 100);
                  
                  // Timeout after 5 seconds if voices are not available
                  setTimeout(() => {
                      clearInterval(waitForVoices);
                      reject('Voices not available');
                  }, 5000);
              });
          }

              // Call getSpecificVoice() and handle the promise
              getSpecificVoice().then(selectedVoice => {
                  // console.log(selectedVoice);
              }).catch(error => {
                  console.error(error);
              });

    const productDetailsArray = {
            1:{
              title: "Black Tshirt",
              description: "Elevate your style with this classic Men's Printed Round Neck Pure Cotton Black T-Shirt. Crafted for comfort and designed to make a statement, this timeless piece is a must-have for every wardrobe.",
              price: "$49.99",
              image1: "assets/img/portfolio/portfolio1.jpg",
              productId: 1000,
            },
            2:{
              title: "Leather Football",
              description: "Unleash your skills on the field with the MAYOR Sammy-3 Football. Made from high-quality leather and designed for optimal performance, this football ensures precision and durability in every game.",
              price: "$30.00",
              image1: "assets/img/portfolio/portfolio2.jpg",
              productId: 1200,
            },
            3:{
              title: "Cricket Bat",
              description: "Dominate the cricket pitch with the CEAT Poplar Willow Cricket Bat. Handcrafted for power and precision, this bat delivers exceptional performance and responsiveness, making it the perfect choice for every aspiring cricketer.",
              price: "$19.89",
              image1: "assets/img/portfolio/portfolio3.jpg",
              productId: 1300,
            },
            4:{
              title: "Black Sunglasses",
              description: "Stay cool and stylish with these RAYBAN Aviator Sunglasses. Featuring UV protection and a timeless design, these sunglasses are the perfect blend of fashion and function for both men and women.",
              price: "$14.49",
              image1: "assets/img/portfolio/portfolio-4.jpg",
              productId: 1400,
            },
            5:{
              title: "Swing Arm Desk Lamp",
              description: "Illuminate your workspace with the Ziggy Flexible Wooden LED Desk Lamp. With its adjustable swing arm and touch-sensitive controls, this lamp provides versatile lighting options for study, reading, or relaxing.",
              price: "$65.00",
              image1: "assets/img/portfolio/portfolio-5.jpg",
              productId: 1500,
            },
            6:{
              title: "Wireless Headphones (Black)",
              description: "Immerse yourself in your favorite music with the JBL Tune 770NC Wireless Headphones. Featuring active noise cancellation and a long battery life, these headphones deliver superior sound quality and comfort for an unparalleled listening experience.",
              price: "$89.99",
              image1: "assets/img/portfolio/portfolio6.jpg",
              productId: 1600,
            },
            7:{
              title: "Cricket Helmet",
              description: "Stay protected on the cricket field with the MOONWALKR Cricket Helmet. Designed for players aged 11 and above, this helmet features a detachable grill for added convenience and safety.",
              price: "$149.99",
              image1: "assets/img/portfolio/portfolio8.jpg",
              productId: 1700,
            },
            8:{
              title: "EX Macro Lens",
              description: "Capture stunning close-up shots with the SONY SEL90M28G Macro Zoom Lens. Whether you're photographing nature, food, or intricate details, this lens delivers exceptional image quality and clarity.",
              price: "$249.99",
              image1: "assets/img/portfolio/portfolio-7.jpg",
              productId: 1800,
            },
            9:{
              title: "Puffer Jacket (Yellow)",
              description: "Stay warm and stylish in the colder months with this Men's Colorblock Puffer Jacket. Featuring a vibrant yellow hue and a cozy design, this jacket is perfect for outdoor adventures or casual outings.",
              price: "$35.00",
              image1: "assets/img/portfolio/portfolio9.jpg",
              productId: 1900,
            },
            10:{
              title: "Water Bottle",
              description: "Stay hydrated on the go with the MILTON Handy 650 Stainless Steel Water Bottle. Designed for durability and convenience, this bottle is perfect for workouts, travel, or everyday use.",
              price: "$100.00",
              image1: "assets/img/portfolio/bottle.jpg",
              productId: 11000,
            },
            11:{
              title: "Men's Watch",
              description: "Upgrade your wrist game with this Matte Black Dial Analog Watch. Featuring a minimalistic design and premium craftsmanship, this watch is both stylish and functional, making it the perfect accessory for any occasion.",
              price: "$240.00",
              image1: "assets/img/portfolio/watch.jpg",
              productId: 1110,
            },
            12:{
              title: "Night Light",
              description: "Add a warm glow to any room with the QERINKLE LED Sensor Plug Night Lamp. With its compact size and soft orange light, this night light is perfect for bedrooms, offices, or living rooms.",
              price: "$150.00",
              image1: "assets/img/portfolio/night light.jpg",
              productId: 1130,
            },
            13:{
              title: "Blazer (Women)",
              description: "Make a bold statement with this Women's Solid Formal Blazer in striking red. Whether you're heading to the office or a special event, this blazer adds a touch of sophistication and elegance to any outfit.",
              price: "$50.00",
              image1: "assets/img/portfolio/blazer.jpg",
              productId: 1140,
            }
          }


    let globalid = 0
    window.changepage = function(btnid) {
      let page2 = document.getElementById("productDescripton-section")
      let page1 = document.getElementById("product-page-real")
      page2.style.display = 'block'
      page1.style.display = 'none'
      globalid = btnid

          let productHeadingElement = document.getElementById("productName")
          let productPriceElement = document.getElementById("productPrice")
          let productDescriptionElement = document.getElementById("productDescriptionMore")
          let productImageElement1 = document.getElementById("productImage1")
        
          productHeadingElement.innerText = productDetailsArray[btnid].title
          productPriceElement.innerText = productDetailsArray[btnid].price
          productDescriptionElement.innerText = productDetailsArray[btnid].description
          productImageElement1.src = productDetailsArray[btnid].image1

          const readOutText = `You are proceeding to buy ${productDetailsArray[btnid].title} of price ${productDetailsArray[btnid].price}. Please click the blue button to proceed payment.`;
          speakText(readOutText);    
    }

    let priceElement = document.getElementById("productPrice");
    console.log(priceElement.innerText)
    
   // Define the updatePrice function
function updatePrice() {
    let priceString = productDetailsArray[globalid].price; // Get the price string from the product details array
    let originalPrice = parseFloat(priceString.replace("$", ""));
    let quantityElement = document.getElementById("quantity");
    let quantityValue = parseInt(quantityElement.value);
    let newPrice = originalPrice * quantityValue;
    priceElement.innerText = "$" + newPrice.toFixed(2);
    speakText(`Price changed to ${priceElement.innerText}. Click the blue button to proceed`)
       } 


    window.goBackToProductPage = function()
    {
          let page2 = document.getElementById("productDescripton-section")
          let page1 = document.getElementById("product-page-real")
          let page3 = document.getElementById("cart-section")

          if(page2.style.display == 'block')
          {
            page2.style.display = 'none'
            page1.style.display = 'block'
            page3.style.display = 'none'
          }
          else if(page3.style.display == 'block')
          {
            page2.style.display = 'none'
            page1.style.display = 'block'
            page3.style.display = 'none'
          }

          
            // Stop any ongoing speech synthesis
            speechSynthesis.cancel();

    }

    // text increase script
    var FontSizeElements = document.querySelectorAll('.font-size-element');
    let savedSize = localStorage.getItem("fontSize");
                  // console.log(savedSize)
                  if (savedSize) {
                    FontSizeElements.forEach(function (element) {
                    element.style.fontSize = savedSize;
                    element.style.lineHeight = savedSize;
                     });
                }

          

    window.addToCartIfNeeded = function(correctId) {


      function updateCartSummary(cartItems) {
            const totalItemsElement = document.getElementById("totalItems");
            const totalPriceElement = document.getElementById("totalPrice");

            // Calculate total items and total price
            let totalItems = 0;
            let totalPrice = 0;
            cartItems.forEach((item) => {
                totalItems++;
                totalPrice += parseFloat(item.price);
            });

            // Update cart summary elements
            totalItemsElement.textContent = totalItems;
            totalPriceElement.textContent = "$" + totalPrice.toFixed(2);
        }
        
          function addToCart(item) {
            // Add a new document with a generated ID to the "cart" collection
            return addDoc(collection(db, "cart"), item)
                .then((docRef) => {
                    console.log("Document written with ID: ", docRef.id);
                    return docRef.id; // Return the ID of the newly added document
                })
                .catch((error) => {
                    console.error("Error adding document: ", error);
                    return null; // Return null if there's an error
                });
        }
        console.log("bro: "+ correctId)
        var newItem = {  };

             // Function to fetch cart items for a specific user
             function fetchCartItems(userId) {
                    const cartItems = []; // Array to store cart items

                    const Cartquery = query(collection(db, "cart"), where("user", "==", userId));

                    // Execute the query
                    return getDocs(Cartquery)
                      .then((querySnapshot) => {
                        // Loop through the query results
                        querySnapshot.forEach((doc) => {
                          // Get the data of each document and push it to the cartItems array
                          cartItems.push(doc.data());
                        });
                        return cartItems; 
                      })
                      .catch((error) => {
                        console.error("Error fetching cart items: ", error);
                        return []; // Return an empty array if there's an error
                      });
                  }

        
        auth.onAuthStateChanged(async user => {
              if (user)
       {
                  console.log(user.uid)
                  var newItem = {
                        name: productDetailsArray[window.currentlyAddedProduct].title,
                        price: productDetailsArray[window.currentlyAddedProduct].price,
                        description: productDetailsArray[window.currentlyAddedProduct].description,
                        productId: productDetailsArray[window.currentlyAddedProduct].productId,
                        image: productDetailsArray[window.currentlyAddedProduct].image1,
                        user: user.uid,
                    };

                    const ProductexistsQuery = query(collection(db, "cart"), where("user", "==", user.uid), where("productId", "==", productDetailsArray[window.currentlyAddedProduct].productId));
                    
                    const ProductexistsSnapshot = await getDocs(ProductexistsQuery);
                    const productExists = !ProductexistsSnapshot.empty;

                    if (productExists) {
                        console.log("Product already exists in the cart");
                    }
                    else
                    {
                      addToCart(newItem)
                    .then((docId) => {
                        if (docId) {
                            console.log(`Item added to cart with ID: ${docId}`);
                        } else {
                            console.log("Failed to add item to cart.");
                        }    
                      });
              }
              const userId = user.uid; 
              const cartItemsContainer = document.getElementById("product-cards");         
              fetchCartItems(userId)
                                    .then((cartItems) => {
                          // Clear existing content
                          cartItemsContainer.innerHTML = '';

                          // Create a row to contain the cart items
                          const row = document.createElement("div");
                          row.classList.add("row", "row-cols-1", "row-cols-md-5", "g-4");
                          // Loop through the cart items and append them to the container
                          cartItems.forEach((item) => {
                              
                              // Create a column for each cart item
                              const col = document.createElement("div");
                              col.classList.add("col");
                              

                              // Create a card for the cart item
                              const card = document.createElement("div");
                              card.classList.add("card", "h-100");
                              

                              // Construct the card body with item details
                              const cardBody = document.createElement("div");
                              cardBody.classList.add("card-body");
                              const img = document.createElement("img");
                              img.src = item.imageUrl; // Replace with the actual image URL from your data
                              img.alt = item.name; // Provide a brief description of the image
                              img.classList.add("img-fluid", "mb-3"); // Add Bootstrap classes for responsive image and margin bottom

                              // Append the image to the card body
                              cardBody.appendChild(img);

                              // Add item details to the card body
                              cardBody.innerHTML = `
                                  <h5 class="card-title">${item.name}</h5> 
                                  <img style="object-fit: contain;height:100px;width:100px;" src="${item.image}"> 
                                  <p  class="card-text"><strong>Price: ${item.price}</strong></p>
                              `;

                              // Add a delete button
                              const deleteButton = document.createElement("button");
                              deleteButton.classList.add("btn", "btn-danger", "btn-sm");
                              deleteButton.innerText = "Remove";
                              deleteButton.addEventListener("click", () => {
                                  // Call a function to delete the item from the cart
                                  deleteCartItem(item.productId); // Assuming there's an 'id' field in the item object
                              });

                              // Append the delete button to the card body
                              cardBody.appendChild(deleteButton);

                              // Append the card body to the card
                              card.appendChild(cardBody);

                              // Append the card to the column
                              col.appendChild(card);

                              // Append the column to the row
                              row.appendChild(col);
                          });

                          // Append the row to the container
                          cartItemsContainer.appendChild(row);


                          function getCartItemCount(userId) {
                          // Reference to the "cart" collection for the specific user
                          const cartCollectionRef = collection(db, "cart");

                          // Query documents in the "cart" collection for the specific user
                          const userCartQuery = query(cartCollectionRef, where("user", "==", userId));

                          // Get all documents in the "cart" collection for the specific user
                          return getDocs(userCartQuery)
                              .then((querySnapshot) => {
                                  // Return the number of documents in the collection for the specific user
                                  return querySnapshot.size;
                              })
                              .catch((error) => {
                                  console.error("Error getting cart items: ", error);
                                  return 0; // Return 0 if there's an error
                              });
                      }

                      // Example usage:
                      const userId = user.uid; 
                      getCartItemCount(userId).then((count) => {
                          document.getElementById("totalItems").textContent = count;
                      });


                      })
                    .catch((error) => {
                      console.error("Error fetching cart items: ", error);
                    });            
         } else {
                            console.log("Not Logged In")
                        }
                    })
                  }               
    </script>
    <script>
      function gotoCartPage()
        {
          let page2 = document.getElementById("productDescripton-section")
          let page1 = document.getElementById("product-page-real")
          let page3 = document.getElementById("cart-section")
          page2.style.display = 'none'
          page1.style.display = 'none'
          page3.style.display = 'block'

        }
    </script>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/annyang/2.6.0/annyang.min.js"></script>


  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>
  <script src="assets/js/annyang.js"></script>
  <script src="assets/js/cartPage.js"></script>

</body>

</html>
